<!DOCTYPE html>
<html lang="ko" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Roullet | 분리 최종본</title>
  <style>
    :root{
      --bg-1:#0f1220; --bg-2:#171a2b; --panel:#1b2142cc;
      --text:#e9ecf1; --muted:#9aa3b2;
      --ghost-bg:#0e1435; --ghost-br:#2d3470;
      --btn1:#2a33a8; --btn2:#1b2088; --btn-br:#4b57ff66;
      --panel-line:#2a2f55; --section-bg:#12173180;
      --ring:0 0 0 3px rgba(88,101,242,.28); --shadow:0 10px 30px rgba(0,0,0,.35); --radius:16px;
      --input-bg:#0f1433; --input-br:#2f3566; --accent:#3aa7ff; --accent2:#0b76d1;
    }
    html[data-theme="light"]{
      --bg-1:#f6f7fb; --bg-2:#eef1fb; --panel:#ffffffee;
      --text:#101322; --muted:#4b5570;
      --ghost-bg:#f3f5ff; --ghost-br:#c9d1ff;
      --btn1:#4d5cff; --btn2:#3743d9; --btn-br:#4b57ff66;
      --panel-line:#e2e7ff; --section-bg:#f7f8ff;
      --input-bg:#ffffff; --input-br:#c9cfef; --accent:#2b7bff; --accent2:#2359cf;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic",sans-serif;
      background:
        radial-gradient(1200px 600px at 20% 0%, #1f294e33, transparent 60%),
        radial-gradient(800px 600px at 100% 100%, #2a3a8a30, transparent 60%),
        linear-gradient(180deg,var(--bg-1),var(--bg-2));
    }
    .wrap{display:grid;grid-template-columns:minmax(360px,1fr) 520px;gap:20px;height:100%;padding:20px}
    .panel{background:var(--panel);backdrop-filter:blur(8px);border:1px solid var(--panel-line);border-radius:var(--radius);box-shadow:var(--shadow)}
    .left{position:relative;display:grid;grid-template-rows:auto 1fr;align-items:center;justify-items:center;padding:24px}
    .title{width:100%;display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .title h1{font-size:18px;font-weight:800;margin:0;letter-spacing:.2px;opacity:.9}
    .canvas-box{position:relative;width:min(90vmin, 920px);aspect-ratio:1/1;display:grid;place-items:center}
    canvas{width:100%;height:100%;z-index:10}
    .pointer{position:absolute; top:-6px; left:50%; transform:translateX(-50%);
      width:0;height:0;border-left:18px solid transparent;border-right:18px solid transparent;border-top:28px solid #ff5a5a;
      filter:drop-shadow(0 10px 14px rgba(0,0,0,.45)); z-index:50;}
    .center-start{
      position:absolute; width:170px; height:170px; border-radius:50%;
      display:grid; place-items:center; font-weight:900; font-size:22px; color:#fff;
      background: radial-gradient(circle at 35% 30%, #7bd3ff, var(--accent) 60%, var(--accent2) 100%);
      border:10px solid #fff; box-shadow:0 14px 24px rgba(0,0,0,.35); cursor:pointer; user-select:none; z-index:40;}
    .center-start:disabled{ filter:grayscale(.4) brightness(.9); cursor:not-allowed; }

    .right{display:flex;flex-direction:column;padding:18px;gap:14px}
    .section{padding:14px;border-radius:12px;background:var(--section-bg);border:1px solid var(--panel-line)}
    .section h2{font-size:14px;font-weight:800;letter-spacing:.4px;margin:0 0 10px 0;color:#7c8bff;text-transform:uppercase}

    .input-row{display:flex;gap:10px;align-items:flex-start}
    .ta{flex:1;min-height:48px;max-height:180px;overflow:auto;resize:none;
        padding:12px 14px;border-radius:12px;border:1px solid var(--input-br);background:var(--input-bg);color:var(--text);
        outline:none;transition:box-shadow .15s,border-color .15s;font-size:15px;line-height:1.4}
    .ta::placeholder{color:var(--muted)} .ta:focus{box-shadow:var(--ring);border-color:#7c8bff}

    .btn{all:unset;display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;border-radius:12px;cursor:pointer;
        color:#fff;font-weight:800;font-size:14px;background:var(--ghost-bg);border:1px solid var(--ghost-br);transition:transform .08s,filter .2s}
    .btn:active{transform:translateY(1px)} .btn:hover{filter:brightness(1.05)}
    .btn-primary{background:linear-gradient(180deg,var(--btn1),var(--btn2));border:1px solid var(--btn-br);box-shadow:0 10px 20px rgba(37,48,140,.35)}
    .btn-s{padding:8px 10px;font-size:12.5px;border-radius:10px}

    .row-3{display:flex;gap:10px;align-items:center;margin-top:8px}

    .table{border:1px solid var(--panel-line);border-radius:12px;padding:10px;background:linear-gradient(180deg,transparent,rgba(255,255,255,.02))}
    table{width:100%;border-collapse:separate;border-spacing:0 2px}
    th,td{padding:4px 6px;font-size:14px}
    th{color:var(--muted);font-weight:700}
    .td-index{width:30px;color:var(--muted);text-align:right;padding-right:6px}
    .td-label input, .td-answer input{width:100%;padding:7px 9px;border-radius:10px;border:1px solid var(--input-br);background:var(--input-bg);color:var(--text)}
    .td-weight input{width:80px;padding:7px;border-radius:10px;border:1px solid var(--input-br);background:var(--input-bg);color:var(--text);text-align:right}
    .td-actions{width:40px;text-align:right}
    .icon-btn{all:unset;display:inline-grid;place-items:center;width:30px;height:30px;border-radius:9px;border:1px solid var(--ghost-br);background:var(--ghost-bg);cursor:pointer}
    .icon-btn:hover{filter:brightness(1.05)}
    .toolbar{display:flex;gap:8px;justify-content:flex-end;margin:-2px 0 8px}

    .help{margin-top:10px;padding:10px 12px;border-radius:10px;border:1px dashed var(--panel-line);color:var(--muted);font-size:13px;line-height:1.6}

    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:100}
    .modal.show{display:flex}
    .backdrop{position:absolute;inset:0;background:rgba(5,8,25,.6);backdrop-filter:blur(3px)}
    .card{position:relative;max-width:min(86vw,880px);min-width:min(70vw,560px);background:linear-gradient(180deg,#121633,#0c0f24);
          color:#fff;border:1px solid #3a47b8aa;border-radius:18px;box-shadow:0 24px 60px rgba(0,0,0,.45);padding:22px 22px 18px}
    .card h3{margin:0 0 6px 0;font-size:18px;letter-spacing:.3px;color:#9fb0ff}
    .card .q{white-space:pre-wrap;font-weight:900;font-size:28px;line-height:1.35}
    .card .a{white-space:pre-wrap;margin-top:12px;padding:12px;border-radius:12px;background:#0b1139a6;border:1px solid #3b4bd466;font-size:22px;display:none}
    .card .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:16px}
    .pill{padding:12px 16px;border-radius:12px;border:2px solid #6aa8ff;background:linear-gradient(180deg,var(--accent),var(--accent2));cursor:pointer;
          color:#fff;font-weight:900;letter-spacing:.3px;box-shadow:0 8px 20px rgba(58,120,255,.28)}
    .pill.secondary{background:#1a1f42d9;border-color:#3a47b8aa}
    .pill:active{transform:translateY(1px)}

    .opt-row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
    .opt-row .group{display:flex;gap:8px;align-items:center;background:rgba(255,255,255,.03);padding:8px 10px;border-radius:10px;border:1px solid var(--panel-line)}
    .opt-row label{font-size:13px;color:var(--muted)}
    .opt-row input[type="range"]{width:140px}

    .hidden{display:none !important}
    @media (max-width:980px){.wrap{grid-template-columns:1fr}.card{min-width:88vw}}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- LEFT -->
    <div class="panel left">
      <div class="title">
        <h1>🎯 룰렛</h1>
        <div style="display:flex;gap:8px">
          <button class="btn btn-s" id="btnReset">↺ 초기화</button>
          <button class="btn btn-s" id="btnBig">🖥 대형</button>
        </div>
      </div>

      <div class="canvas-box" id="canvasBox">
        <div class="pointer" aria-hidden="true"></div>
        <canvas id="wheel" width="920" height="920"></canvas>
        <button id="btnCenterStart" class="center-start">시작</button>
      </div>
    </div>

    <!-- RIGHT -->
    <aside class="panel right">
      <div class="section">
        <h2>입력 · 불러오기</h2>
        <div class="input-row">
          <textarea id="quizInput" class="ta" placeholder="한 줄 입력 후 Enter(추가) · Shift+Enter(줄바꿈) / 예) 호주의 수도는? // 캔버라"></textarea>
          <button class="btn btn-primary" id="btnAdd">+ 추가</button>
        </div>

        <div class="row-3">
          <button class="btn" id="btnToggleList">👁 항목 보기/숨기기</button>
          <button class="btn" id="btnLoadFile">📁 파일 불러오기</button>
          <button class="btn" id="btnDownloadSamples">⬇ 샘플 내려받기</button>
          <input id="fileInput" type="file" accept=".txt,.csv" class="hidden" />
        </div>

        <div class="help">
          <b>입력방법</b><br>
          • 한 줄 = 한 항목<br>
          • 정답/부가정보가 있으면 <b>항목 // 정답</b> (기존 <code>||</code>도 호환)<br>
          • CSV: <code>label,answer,weight</code> · TXT: 줄마다 항목 또는 <code>항목 // 정답</code>
        </div>

        <div id="editorWrap" class="table hidden" style="margin-top:10px">
          <div class="toolbar">
            <button class="btn btn-s" id="btnSave">💾 저장하기</button>
            <button class="btn btn-s" id="btnClearWeight">전체 비중 지우기</button>
          </div>
          <table>
            <thead>
              <tr><th class="td-index">#</th><th>항목</th><th>정답</th><th style="width:90px">비중</th><th class="td-actions"></th></tr>
            </thead>
            <tbody id="itemTable"></tbody>
          </table>
        </div>
      </div>

      <div class="section" style="margin-top:12px">
        <h2>기록</h2>
        <div style="display:flex;gap:10px;margin-bottom:8px">
          <button class="btn" id="btnToggleLog">📝 보기/숨기기</button>
          <button class="btn" id="btnClearLog">🗑 삭제</button>
        </div>
        <div id="logBox" class="hidden" style="max-height:180px;overflow:auto;font-size:13px;opacity:.9"></div>
      </div>

      <div class="section" style="margin-top:12px">
        <h2>옵션</h2>
        <label style="display:flex;align-items:center;gap:10px;margin-top:6px">
          <input id="chkDupe" type="checkbox" checked /> 중복 허용(당첨 후 삭제 안 함)
        </label>
        <label style="display:flex;align-items:center;gap:10px;margin-top:6px">
          <input id="chkTheme" type="checkbox" /> 밝은(프로젝터) 모드
        </label>
        <div class="opt-row" style="margin-top:10px">
          <div class="group">
            <label for="rngVol">볼륨</label>
            <input id="rngVol" type="range" min="0" max="100" value="70" />
            <label><input id="chkMute" type="checkbox" /> 음소거</label>
          </div>
          <div class="group" role="radiogroup" aria-label="사운드 세트">
            <label><input type="radio" name="sfxSet" value="quiet" checked /> 조용</label>
            <label><input type="radio" name="sfxSet" value="hype" /> 신나는</label>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- 결과 팝업 -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="backdrop"></div>
    <div class="card" role="dialog" aria-modal="true" aria-labelledby="mTitle">
      <h3 id="mTitle">당첨</h3>
      <div id="mQuestion" class="q"></div>
      <div id="mAnswer" class="a"></div>
      <div class="actions">
        <button id="btnReveal" class="pill">정답 보기</button>
        <button id="btnClose" class="pill secondary">닫기</button>
      </div>
    </div>
  </div>

  <!-- 분리된 스크립트 -->
  <script src="roullet.js" defer></script>
</body>
</html>
